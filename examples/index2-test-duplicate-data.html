<html>
<head>
    <style>
        #container {
            width: 100%;
            height: 100%;
            display: flex;
        }
        #mecuGraph1 {
            width: 50%;
            height: 100%;
        }
    </style>
</head>

<body>
<h1 style="text-align: center; width: 100%">MeCu-Graph</h1>
<div id="container" style="display:flex">
    <div id="mecuGraph1"></div>
</div>

<script src="../build/mecu-graph.js"></script>
<script src="../lib/disi.js"></script>

<script>
    let readData = [
        {
            "t": 37,
            "r": 0.993418134979102
        },
        {
            "t": 40,
            "r": 0.929500949919296
        },
        {
            "t": 43,
            "r": 0.777685824744663
        },
        {
            "t": 46,
            "r": 0.526748020042036
        },
        {
            "t": 49,
            "r": 0.289460162283198
        },
        {
            "t": 52,
            "r": 0.183800390960287
        },
        {
            "t": 55,
            "r": 0.105687348711846
        },
        {
            "t": 58,
            "r": 0.0669430966262662
        },
        {
            "t": 61,
            "r": 0.0499022808465434
        },
        {
            "t": 64,
            "r": 0.0515747694454481
        }
    ];
    let data = [
        {
            "uniprotId": "P00001",
            "experiments": [
                {
                    "experiment": 1,
                    "reads": readData
                },
                {
                    "experiment": 2,
                    "reads": readData
                }
            ]
        },
        {
            "uniprotId": "P00002",
            "experiments": [
                {
                    "experiment": 1,
                    "reads": readData
                }
            ]
        },
        {
            "uniprotId": "P00003",
            "experiments": [
                {
                    "experiment": 1,
                    "reads": readData
                },
                {
                    "experiment": 2,
                    "reads": readData
                },
                {
                    "experiment": 3,
                    "reads": readData
                },
            ]
        },
    ];

    var graph0 = new MecuGraph({element: "#mecuGraph1"});
    graph0.add(data);

    const changeDistanceMetricOfGraph = (graph) => {
        setTimeout(() => {
                changeMetricRandomly(graph);
                changeDistanceMetricOfGraph(graph);
            },
            2000
        );
    }

    const changeMetricRandomly = (graph) => {
        const r = Math.floor(Math.random() * 4) + 1;
        console.log(`r`, r);
        switch (r) {
            case 1:
                graph.changeDistanceMetric(Disi.supremum);
                break;
            case 2:
                graph.changeDistanceMetric(Disi.euclidian);
                break;
            case 3:
                graph.changeDistanceMetric(Disi.manhattan);
                break;
            case 4:
                graph.changeDistanceMetric((a,b) => Disi.minkowski(a,b, Math.floor(Math.random() * 3)+1) );
                break;
        }
    }

    changeDistanceMetricOfGraph(graph0);

</script>
</body>
</html>
